<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
</head>

<body>
  <button onclick="game()">Play Rock Paper Scissors</button>
  <script>
    // function that determines computer's rock, paper, scissors selection
    // using RNG then assigning rock, paper, scissors based on number
    // returns Rock, Paper, or Scissors
    function computerPlay() {
      let decisionIn = Math.floor(Math.random() * 3) + 1;
      let decisionOut = undefined;
      if (decisionIn == 1) {
        decisionOut = "Rock";
      } else if (decisionIn == 2) {
        decisionOut = "Paper";
      } else {
        decisionOut = "Scissors";
      }
      return decisionOut;
    }
    //function that plays one round of rock paper scissors
    //takes inputs for player selection and computer playerSelection
    //turns player selection string into first letter uppercase and rest lowercase
    //alerts result of round and returns result
    function playRound(playerSelection, computerSelection) {
      playerSelection = playerSelection[0].toUpperCase() +
      playerSelection.substr(1).toLowerCase();
      if (playerSelection === computerSelection) {
        alert("You Tied!");
        return "Tie";
      } else if ((playerSelection==='Rock' && computerSelection==='Scissors') ||
      (playerSelection==='Scissors' && computerSelection==='Paper') ||
      (playerSelection==='Paper' && computerSelection==='Rock')) {
        alert(`You Win! ${playerSelection} beats ${computerSelection}`);
        return "Win";
      } else {
        alert(`You Lose! ${computerSelection} beats ${playerSelection}`);
        return "Lose";
      }
    }
    //plays a prompted number of rounds of rock paper scissors
    //keeps track of score and displays result in console
    function game() {
      let rounds = prompt("How many rounds do you want to play?",5);
      let score = 0;
      let myPick = undefined;
      let result = undefined;
      for (i = 0; i < rounds; i++) {
        if (((score/rounds) > 0.5) || ((score/rounds) < -0.5)) {
          break;
        }
        myPick = prompt("Rock, Paper, Scissors","");
        result = playRound(myPick, computerPlay());
        if (result.includes("Tie")) {
          i--;
        } else if (result.includes("Win")) {
          score++;
        } else if (result.includes("Lose")) {
          score --;
        }
      }
      if (score == 0) {
        console.log("tie");
      } else if (score > 0) {
        console.log("player win");
      } else if (score < 0) {
        console.log("player lose");
      }
    }
  </script>
</body>
</html>
